version: "2"
sql:
  - engine: postgresql
    queries: db/queries
    schema: db/schema.sql
    gen:
      go:
        package: db
        out: internal/database/sqlc
        sql_package: "pgx/v5"
        emit_json_tags: true
        emit_interface: false
        emit_pointers_for_null_types: true
        overrides:
          # Map enums to Go string types to keep API ergonomic
          - db_type: "page_status"
            go_type:
              type: string
          - db_type: "post_status"
            go_type:
              type: string
          - db_type: "contact_status"
            go_type:
              type: string
          - db_type: "user_role"
            go_type:
              type: string
        rename:
          # Optional: ensure consistent ID casing
          id: ID
          user_id: UserID
          author_id: AuthorID
          uploader_id: UploaderID
          page_id: PageID
          post_id: PostID
          category_id: CategoryID
          tag_id: TagID
        emit_db_tags: false
        emit_result_struct_pointers: false
        json_tags_case_style: "snake"