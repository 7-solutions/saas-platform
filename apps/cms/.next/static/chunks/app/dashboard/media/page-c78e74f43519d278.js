(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{457:(e,s,a)=>{Promise.resolve().then(a.bind(a,7575))},7575:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>L});var t=a(9694),l=a(3070),r=a(353),i=a(5373),n=a(9706),c=a(3605),d=a(8274),o=a(5697),x=a(4925),m=a(6930),h=a(1989),u=a(1904),g=a(2885),j=a(9178),f=a(3159);function p(e){let{isOpen:s,onClose:a,onUpload:c}=e,[d,o]=(0,l.useState)(null),[x,u]=(0,l.useState)(""),[p,b]=(0,l.useState)(!1),[y,N]=(0,l.useState)(null),[v,w]=(0,l.useState)(null),k=()=>{o(null),u(""),N(null),w(null)},C=(0,l.useCallback)(e=>{let s=e[0];if(s)try{f.J4.parse({file:s,alt_text:x}),o(s),N(null);let e=new FileReader;e.onload=e=>{var s;w(null==(s=e.target)?void 0:s.result)},e.readAsDataURL(s)}catch(e){var a,t;N((null==(t=e.errors)||null==(a=t[0])?void 0:a.message)||"Invalid file")}},[x]),{getRootProps:A,getInputProps:S,isDragActive:F}=(0,r.VB)({onDrop:C,accept:{"image/*":[".jpeg",".jpg",".png",".gif",".webp"]},maxFiles:1,maxSize:0xa00000}),_=async()=>{if(d)try{b(!0),N(null),await c(d,x),k(),a()}catch(e){N(e.message||"Upload failed")}finally{b(!1)}},z=()=>{p||(k(),a())};return s?(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Upload Media"}),(0,t.jsx)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:z,disabled:p,children:(0,t.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[d?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[v&&(0,t.jsx)("img",{src:v,alt:"Preview",className:"w-full h-64 object-cover rounded-lg border border-gray-200"}),(0,t.jsx)(h.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{o(null),w(null),N(null)},className:"absolute top-2 right-2 bg-white shadow-sm",disabled:p,children:(0,t.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(j.A,{className:"h-8 w-8 text-gray-400"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:d.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[d.type," • ",(d.size/1024/1024).toFixed(2)," MB"]})]})]})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"altText",className:"block text-sm font-medium text-gray-700 mb-2",children:["Alt Text",(0,t.jsx)("span",{className:"text-gray-500 font-normal ml-1",children:"(Optional)"})]}),(0,t.jsx)("textarea",{id:"altText",value:x,onChange:e=>u(e.target.value),placeholder:"Describe the image for accessibility and SEO",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,maxLength:200,disabled:p}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Helps with accessibility and SEO"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[x.length,"/200"]})]})]})]}):(0,t.jsxs)("div",{...A(),className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ".concat(F?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[(0,t.jsx)("input",{...S()}),(0,t.jsx)(n.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),F?(0,t.jsx)("p",{className:"text-blue-600 font-medium",children:"Drop the file here..."}):(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600 font-medium mb-2",children:"Drag & drop a file here, or click to select"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Supports JPEG, PNG, GIF, WebP (max 10MB)"})]})]}),y&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 text-red-400 mr-2"}),(0,t.jsx)("p",{className:"text-sm text-red-600",children:y})]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,t.jsx)(h.$,{type:"button",variant:"outline",onClick:z,disabled:p,children:"Cancel"}),(0,t.jsx)(h.$,{type:"button",onClick:_,disabled:!d||p,children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Upload"]})})]})]})}):null}var b=a(5106),y=a(7289),N=a(2122),v=a(6705);function w(e){let{files:s,selectedFiles:a,onFileSelect:r,onSelectAll:i,onEdit:n,onDelete:c}=e,[d,o]=(0,l.useState)(null),x=s.length>0&&s.every(e=>a.has(e.id)),m=s.some(e=>a.has(e.id)),h=async e=>{try{await navigator.clipboard.writeText(e),o(e),setTimeout(()=>o(null),2e3)}catch(e){console.error("Failed to copy URL:",e)}},u=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},g=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,t.jsxs)("div",{className:"space-y-4",children:[s.length>0&&(0,t.jsx)("div",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"checkbox",checked:x,ref:e=>{e&&(e.indeterminate=m&&!x)},onChange:()=>{i(!x)},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:a.size>0?"".concat(a.size," of ").concat(s.length," selected"):"".concat(s.length," files")})]})}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:s.map(e=>(0,t.jsx)(k,{file:e,selected:a.has(e.id),onSelect:s=>r(e.id,s),onEdit:()=>n(e),onDelete:()=>c(e),onCopyUrl:()=>h(e.url),onDownload:()=>(e=>{let s=document.createElement("a");s.href=e.url,s.download=e.original_name,document.body.appendChild(s),s.click(),document.body.removeChild(s)})(e),copiedUrl:d,formatFileSize:u,formatDate:g},e.id))})]})}function k(e){let{file:s,selected:a,onSelect:r,onEdit:i,onDelete:n,onCopyUrl:c,onDownload:o,copiedUrl:x,formatFileSize:m,formatDate:u}=e,[g,j]=(0,l.useState)(!1);return(0,t.jsxs)("div",{className:"group relative bg-white border-2 rounded-lg overflow-hidden transition-all hover:shadow-md ".concat(a?"border-blue-500 ring-2 ring-blue-200":"border-gray-200"),onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[(0,t.jsx)("div",{className:"absolute top-2 left-2 z-10",children:(0,t.jsx)("input",{type:"checkbox",checked:a,onChange:e=>r(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded shadow-sm"})}),g&&(0,t.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,t.jsxs)("div",{className:"flex items-center space-x-1 bg-white rounded-md shadow-sm border border-gray-200 p-1",children:[(0,t.jsx)(h.$,{variant:"ghost",size:"sm",onClick:i,className:"h-6 w-6 p-0",title:"Edit",children:(0,t.jsx)(b.A,{className:"h-3 w-3"})}),(0,t.jsx)(h.$,{variant:"ghost",size:"sm",onClick:c,className:"h-6 w-6 p-0",title:"Copy URL",children:x===s.url?(0,t.jsx)(y.A,{className:"h-3 w-3 text-green-600"}):(0,t.jsx)(N.A,{className:"h-3 w-3"})}),(0,t.jsx)(h.$,{variant:"ghost",size:"sm",onClick:o,className:"h-6 w-6 p-0",title:"Download",children:(0,t.jsx)(v.A,{className:"h-3 w-3"})}),(0,t.jsx)(h.$,{variant:"ghost",size:"sm",onClick:n,className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",title:"Delete",children:(0,t.jsx)(d.A,{className:"h-3 w-3"})})]})}),(0,t.jsx)("div",{className:"aspect-square bg-gray-100",children:(0,t.jsx)("img",{src:s.url,alt:s.alt_text||s.original_name,className:"w-full h-full object-cover",loading:"lazy"})}),(0,t.jsxs)("div",{className:"p-3 space-y-1",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",title:s.original_name,children:s.original_name}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:m(s.size)}),(0,t.jsx)("span",{children:u(s.created_at)})]}),s.alt_text&&(0,t.jsx)("p",{className:"text-xs text-gray-600 truncate",title:s.alt_text,children:s.alt_text})]})]})}function C(e){let{files:s,selectedFiles:a,onFileSelect:r,onSelectAll:i,onEdit:n,onDelete:c}=e,[d,o]=(0,l.useState)(null),x=s.length>0&&s.every(e=>a.has(e.id)),m=s.some(e=>a.has(e.id)),h=async e=>{try{await navigator.clipboard.writeText(e),o(e),setTimeout(()=>o(null),2e3)}catch(e){console.error("Failed to copy URL:",e)}},u=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},g=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,t.jsxs)("div",{className:"bg-white shadow-sm border border-gray-200 rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,t.jsx)("input",{type:"checkbox",checked:x,ref:e=>{e&&(e.indeterminate=m&&!x)},onChange:()=>{i(!x)},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:a.size>0?"".concat(a.size," of ").concat(s.length," selected"):"Name"})]}),(0,t.jsxs)("div",{className:"hidden sm:flex items-center space-x-8 text-sm font-medium text-gray-700",children:[(0,t.jsx)("span",{className:"w-20",children:"Size"}),(0,t.jsx)("span",{className:"w-32",children:"Modified"}),(0,t.jsx)("span",{className:"w-20",children:"Actions"})]})]})}),(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:s.map(e=>(0,t.jsx)(A,{file:e,selected:a.has(e.id),onSelect:s=>r(e.id,s),onEdit:()=>n(e),onDelete:()=>c(e),onCopyUrl:()=>h(e.url),onDownload:()=>(e=>{let s=document.createElement("a");s.href=e.url,s.download=e.original_name,document.body.appendChild(s),s.click(),document.body.removeChild(s)})(e),copiedUrl:d,formatFileSize:u,formatDate:g},e.id))})]})}function A(e){let{file:s,selected:a,onSelect:l,onEdit:r,onDelete:i,onCopyUrl:n,onDownload:c,copiedUrl:o,formatFileSize:x,formatDate:m}=e;return(0,t.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 ".concat(a?"bg-blue-50":""),children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,t.jsx)("input",{type:"checkbox",checked:a,onChange:e=>l(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"h-10 w-10 bg-gray-100 rounded-lg overflow-hidden",children:(0,t.jsx)("img",{src:s.url,alt:s.alt_text||s.original_name,className:"h-full w-full object-cover",loading:"lazy"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.original_name}),s.alt_text&&(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:"Alt text"})]}),s.alt_text&&(0,t.jsx)("p",{className:"text-sm text-gray-500 truncate mt-1",title:s.alt_text,children:s.alt_text}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-1 sm:hidden",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:x(s.size)}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:m(s.created_at)})]})]})]}),(0,t.jsxs)("div",{className:"hidden sm:flex items-center space-x-8",children:[(0,t.jsx)("div",{className:"w-20 text-sm text-gray-500",children:x(s.size)}),(0,t.jsx)("div",{className:"w-32 text-sm text-gray-500",children:m(s.created_at)}),(0,t.jsxs)("div",{className:"w-20 flex items-center space-x-1",children:[(0,t.jsx)(h.$,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0",title:"Edit",children:(0,t.jsx)(b.A,{className:"h-4 w-4"})}),(0,t.jsx)(h.$,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0",title:"Copy URL",children:o===s.url?(0,t.jsx)(y.A,{className:"h-4 w-4 text-green-600"}):(0,t.jsx)(N.A,{className:"h-4 w-4"})}),(0,t.jsx)(h.$,{variant:"ghost",size:"sm",onClick:c,className:"h-8 w-8 p-0",title:"Download",children:(0,t.jsx)(v.A,{className:"h-4 w-4"})}),(0,t.jsx)(h.$,{variant:"ghost",size:"sm",onClick:i,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",title:"Delete",children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 sm:hidden",children:[(0,t.jsx)(h.$,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0",children:(0,t.jsx)(b.A,{className:"h-4 w-4"})}),(0,t.jsx)(h.$,{variant:"ghost",size:"sm",onClick:i,className:"h-8 w-8 p-0 text-red-600",children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})]})]})})}var S=a(3218);function F(e){let{file:s,onClose:a,onUpdate:r}=e,[n,c]=(0,l.useState)(s.alt_text||""),[d,o]=(0,l.useState)(s.filename),[x,u]=(0,l.useState)(!1),[f,p]=(0,l.useState)(null),b=n!==(s.alt_text||"")||d!==s.filename,y=async()=>{if(!b)return void a();try{u(!0),p(null);let e={};n!==(s.alt_text||"")&&(e.alt_text=n),d!==s.filename&&(e.filename=d),await r(s.id,e),a()}catch(e){p(e.message||"Update failed")}finally{u(!1)}},N=()=>{x||a()};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Edit Media"}),(0,t.jsx)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:N,disabled:x,children:(0,t.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-6",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-full sm:w-64 h-48 bg-gray-100 rounded-lg overflow-hidden",children:(0,t.jsx)("img",{src:s.url,alt:s.alt_text||s.original_name,className:"w-full h-full object-cover"})})}),(0,t.jsx)("div",{className:"flex-1 space-y-4",children:(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,t.jsx)(j.A,{className:"h-5 w-5 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"File Details"})]}),(0,t.jsxs)("dl",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500",children:"Original name:"}),(0,t.jsx)("dd",{className:"text-gray-900 font-medium",children:s.original_name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500",children:"Type:"}),(0,t.jsx)("dd",{className:"text-gray-900",children:s.mime_type})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500",children:"Size:"}),(0,t.jsx)("dd",{className:"text-gray-900",children:(e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]})(s.size)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500",children:"Uploaded:"}),(0,t.jsx)("dd",{className:"text-gray-900",children:new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500",children:"URL:"}),(0,t.jsx)("dd",{className:"text-gray-900 truncate max-w-48",title:s.url,children:s.url})]})]})]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"filename",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filename"}),(0,t.jsx)("input",{id:"filename",type:"text",value:d,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:x,placeholder:"Enter filename"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"This will be used as the display name for the file"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"altText",className:"block text-sm font-medium text-gray-700 mb-2",children:["Alt Text",(0,t.jsx)("span",{className:"text-gray-500 font-normal ml-1",children:"(Optional)"})]}),(0,t.jsx)("textarea",{id:"altText",value:n,onChange:e=>c(e.target.value),placeholder:"Describe the image for accessibility and SEO",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:4,maxLength:200,disabled:x}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Helps with accessibility and SEO. Describe what's in the image."}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[n.length,"/200"]})]})]})]}),f&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 text-red-400 mr-2"}),(0,t.jsx)("p",{className:"text-sm text-red-600",children:f})]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,t.jsx)(h.$,{type:"button",variant:"outline",onClick:N,disabled:x,children:"Cancel"}),(0,t.jsx)(h.$,{type:"button",onClick:y,disabled:!b||x,children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})}var _=a(7902);function z(e){let{files:s,onClose:a,onDelete:r}=e,[n,c]=(0,l.useState)(!1),[o,x]=(0,l.useState)(null),m=1===s.length,u=s.map(e=>e.id),j=async()=>{try{c(!0),x(null),await r(u),a()}catch(e){x(e.message||"Delete failed")}finally{c(!1)}},f=()=>{n||a()};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(_.A,{className:"h-6 w-6 text-red-600"})}),(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Delete ",m?"File":"Files"]})]}),(0,t.jsx)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:f,disabled:n,children:(0,t.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:m?(0,t.jsx)("p",{children:"Are you sure you want to delete this file? This action cannot be undone."}):(0,t.jsxs)("p",{children:["Are you sure you want to delete these ",s.length," files? This action cannot be undone."]})}),(0,t.jsx)("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-md",children:s.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 ".concat(a!==s.length-1?"border-b border-gray-200":""),children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"h-10 w-10 bg-gray-100 rounded-lg overflow-hidden",children:(0,t.jsx)("img",{src:e.url,alt:e.alt_text||e.original_name,className:"h-full w-full object-cover",loading:"lazy"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.original_name}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,t.jsx)("span",{children:(e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]})(e.size)}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:e.mime_type})]})]})]},e.id))}),(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)(_.A,{className:"h-4 w-4 text-yellow-400 mt-0.5 mr-2 flex-shrink-0"}),(0,t.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,t.jsx)("p",{className:"font-medium",children:"Warning"}),(0,t.jsx)("p",{className:"mt-1",children:m?"If this file is used in any pages or content, those references will be broken.":"If any of these files are used in pages or content, those references will be broken."})]})]})}),o&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(_.A,{className:"h-4 w-4 text-red-400 mr-2"}),(0,t.jsx)("p",{className:"text-sm text-red-600",children:o})]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,t.jsx)(h.$,{type:"button",variant:"outline",onClick:f,disabled:n,children:"Cancel"}),(0,t.jsx)(h.$,{type:"button",variant:"destructive",onClick:j,disabled:n,children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Delete ",m?"File":"".concat(s.length," Files")]})})]})]})})}var D=a(713),M=a(5363),E=a(3067);let T=[{value:"",label:"All Types"},{value:"image/jpeg",label:"JPEG Images"},{value:"image/png",label:"PNG Images"},{value:"image/gif",label:"GIF Images"},{value:"image/webp",label:"WebP Images"}];function $(e){var s;let{filters:a,onFiltersChange:r,totalCount:i}=e,[n,c]=(0,l.useState)(!1),d=e=>{r({...a,search:e})},o=e=>{r({...a,mimeType:e})},x=a.search||a.mimeType||a.tags.length>0||a.folder;return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(D.A,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsx)("input",{type:"text",placeholder:"Search files...",value:a.search,onChange:e=>d(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("select",{value:a.mimeType,onChange:e=>o(e.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md appearance-none bg-white",children:T.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,t.jsx)(M.A,{className:"h-4 w-4 text-gray-400"})})]}),(0,t.jsxs)(h.$,{variant:"outline",onClick:()=>c(!n),className:"flex items-center space-x-2",children:[(0,t.jsx)(E.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Filters"}),(0,t.jsx)(M.A,{className:"h-4 w-4 transition-transform ".concat(n?"rotate-180":"")})]})]}),n&&(0,t.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Advanced Filters"}),x&&(0,t.jsxs)(h.$,{variant:"ghost",size:"sm",onClick:()=>{r({search:"",mimeType:"",tags:[],folder:""})},className:"text-gray-500 hover:text-gray-700",children:[(0,t.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"Clear all"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Folder"}),(0,t.jsxs)("select",{value:a.folder,onChange:e=>r({...a,folder:e.target.value}),className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md appearance-none bg-white",disabled:!0,children:[(0,t.jsx)("option",{value:"",children:"All Folders"}),(0,t.jsx)("option",{value:"images",children:"Images"}),(0,t.jsx)("option",{value:"documents",children:"Documents"})]}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Coming soon"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),(0,t.jsx)("input",{type:"text",placeholder:"Enter tags...",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:!0}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Coming soon"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,t.jsx)("div",{children:i>0?(0,t.jsxs)("span",{children:[x?"Filtered: ":"",i," file",1!==i?"s":""]}):(0,t.jsx)("span",{children:"No files found"})}),x&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{children:"Active filters:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[a.search&&(0,t.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:['Search: "',a.search,'"',(0,t.jsx)("button",{onClick:()=>d(""),className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full hover:bg-blue-200",children:(0,t.jsx)(g.A,{className:"h-2 w-2"})})]}),a.mimeType&&(0,t.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[null==(s=T.find(e=>e.value===a.mimeType))?void 0:s.label,(0,t.jsx)("button",{onClick:()=>o(""),className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full hover:bg-green-200",children:(0,t.jsx)(g.A,{className:"h-2 w-2"})})]})]})]})]})]})}function U(){let[e,s]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{s(!0)},[]),e)?(0,t.jsx)(B,{}):(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(i.A,{className:"h-8 w-8 animate-spin text-gray-400"})})}function B(){let e=(0,u.wR)(),[s,a]=(0,l.useState)([]),[g,j]=(0,l.useState)(!0),[f,b]=(0,l.useState)(null),[y,N]=(0,l.useState)("grid"),[v,k]=(0,l.useState)(new Set),[A,S]=(0,l.useState)(!1),[_,D]=(0,l.useState)(null),[M,E]=(0,l.useState)([]),[T,U]=(0,l.useState)({search:"",mimeType:"",tags:[],folder:""}),[B,L]=(0,l.useState)({pageToken:"",hasMore:!1,totalCount:0}),G=(0,l.useCallback)(async function(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{j(!0),b(null);let t={page_size:50,page_token:s?"":B.pageToken,search:T.search||void 0,mime_type_filter:T.mimeType||void 0},l=await e.listFiles(t);if(l.error)throw Error(l.error.message);let r=l.data;s?a(r.files):a(e=>[...e,...r.files]),L({pageToken:r.next_page_token,hasMore:!!r.next_page_token,totalCount:r.total_count})}catch(e){b(e.message||"Failed to load files")}finally{j(!1)}},[e,T,B.pageToken]);(0,l.useEffect)(()=>{G(!0)},[T,G]);let I=async(s,t)=>{try{let l=await e.uploadFile(s,t);if(l.error)throw Error(l.error.message);return a(e=>[l.data,...e]),L(e=>({...e,totalCount:e.totalCount+1})),l.data.url}catch(e){throw Error(e.message||"Upload failed")}},O=async(s,t)=>{try{let l=await e.updateFile({id:s,...t});if(l.error)throw Error(l.error.message);return a(e=>e.map(e=>e.id===s?l.data:e)),l.data}catch(e){throw Error(e.message||"Update failed")}},R=async s=>{try{for(let a of s){let s=await e.deleteFile({id:a});if(s.error)throw Error(s.error.message)}a(e=>e.filter(e=>!s.includes(e.id))),k(new Set),L(e=>({...e,totalCount:e.totalCount-s.length}))}catch(e){throw Error(e.message||"Delete failed")}},P=(e,s)=>{k(a=>{let t=new Set(a);return s?t.add(e):t.delete(e),t})},K=e=>{e?k(new Set(s.map(e=>e.id))):k(new Set)},J=(0,l.useCallback)(e=>{1===e.length?S(!0):console.log("Multiple files dropped:",e)},[]),{getRootProps:W,getInputProps:H,isDragActive:V}=(0,r.VB)({onDrop:J,accept:{"image/*":[".jpeg",".jpg",".png",".gif",".webp"]},noClick:!0,noKeyboard:!0});return(0,t.jsxs)("div",{className:"space-y-6",...W(),children:[(0,t.jsx)("input",{...H()}),V&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-blue-500 bg-opacity-20 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8 text-center",children:[(0,t.jsx)(n.A,{className:"h-16 w-16 text-blue-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:"Drop files to upload"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Release to start uploading"})]})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(h.$,{onClick:()=>S(!0),className:"flex items-center gap-2",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),"Upload Files"]}),v.size>0&&(0,t.jsxs)(h.$,{variant:"outline",onClick:()=>{E(s.filter(e=>v.has(e.id)))},className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[(0,t.jsx)(d.A,{className:"h-4 w-4"}),"Delete Selected (",v.size,")"]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-md",children:[(0,t.jsx)(h.$,{variant:"grid"===y?"default":"ghost",size:"sm",onClick:()=>N("grid"),className:"rounded-r-none",children:(0,t.jsx)(o.A,{className:"h-4 w-4"})}),(0,t.jsx)(h.$,{variant:"list"===y?"default":"ghost",size:"sm",onClick:()=>N("list"),className:"rounded-l-none",children:(0,t.jsx)(x.A,{className:"h-4 w-4"})})]})})]}),(0,t.jsx)($,{filters:T,onFiltersChange:U,totalCount:B.totalCount}),f&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"h-5 w-5 text-red-400 mr-2"}),(0,t.jsx)("p",{className:"text-sm text-red-600",children:f})]})}),g&&0===s.length&&(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(i.A,{className:"h-8 w-8 animate-spin text-gray-400"})}),!g&&0===s.length&&!f&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(n.A,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No files found"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:T.search||T.mimeType?"Try adjusting your filters or search terms":"Get started by uploading your first file"}),(0,t.jsxs)(h.$,{onClick:()=>S(!0),children:[(0,t.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Upload Files"]})]}),s.length>0&&(0,t.jsxs)(t.Fragment,{children:["grid"===y?(0,t.jsx)(w,{files:s,selectedFiles:v,onFileSelect:P,onSelectAll:K,onEdit:D,onDelete:e=>E([e])}):(0,t.jsx)(C,{files:s,selectedFiles:v,onFileSelect:P,onSelectAll:K,onEdit:D,onDelete:e=>E([e])}),B.hasMore&&(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(h.$,{variant:"outline",onClick:()=>G(!1),disabled:g,children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):"Load More"})})]}),(0,t.jsx)(p,{isOpen:A,onClose:()=>S(!1),onUpload:I}),_&&(0,t.jsx)(F,{file:_,onClose:()=>D(null),onUpdate:O}),M.length>0&&(0,t.jsx)(z,{files:M,onClose:()=>E([]),onDelete:R})]})}function L(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Media Library"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your images and media files"})]})}),(0,t.jsx)(U,{})]})}}},e=>{e.O(0,[96,76,289,358],()=>e(e.s=457)),_N_E=e.O()}]);