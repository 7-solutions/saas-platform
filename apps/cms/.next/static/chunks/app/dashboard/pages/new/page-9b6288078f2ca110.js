(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[291],{5990:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(9694),o=a(3070),s=a(7804),l=a(9751),i=a(9399),n=a(1195),d=a(6382);function u(){let e=(0,s.useRouter)(),[t,a]=(0,o.useState)(!1),[u,c]=(0,o.useState)(!1),[p,m]=(0,o.useState)(null),[g,h]=(0,o.useState)(!1),w=(0,d.dL)(),y=(0,d.wR)(),f=async t=>{if(w)try{var a;h(!0);let r={title:t.title,slug:t.slug,content:{blocks:[{type:"html",data:{content:t.content}}]},meta:{title:t.meta.title,description:t.meta.description,keywords:t.meta.keywords||[]},status:"published"===t.status?d._g.PUBLISHED:d._g.DRAFT},o=await w.createPage(r);if(o.error)throw Error(o.error.message);e.push("/dashboard/pages/".concat(null==(a=o.data)?void 0:a.id,"/edit"))}catch(e){console.error("Failed to save page:",e),alert("Failed to save page. Please try again.")}finally{h(!1)}},v=async(e,t)=>{if(!y)throw Error("Media API not available");try{var a;let r=await e.arrayBuffer(),o=new Uint8Array(r),s=await y.uploadFile({content:o,filename:e.name,mime_type:e.type,alt_text:t});if(s.error)throw Error(s.error.message);return(null==(a=s.data)?void 0:a.url)||""}catch(e){throw console.error("Failed to upload image:",e),e}};return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)(l.r,{onSave:f,onPreview:e=>{m(e),a(!0)},onImageUpload:v,isLoading:g}),p&&(0,r.jsx)(i.u,{data:p,isOpen:t,onClose:()=>a(!1)}),(0,r.jsx)(n.Q,{isOpen:u,onClose:()=>c(!1),onUpload:v})]})}},6767:(e,t,a)=>{Promise.resolve().then(a.bind(a,5990))}},e=>{e.O(0,[80,980,753,96,76,289,358],()=>e(e.s=6767)),_N_E=e.O()}]);