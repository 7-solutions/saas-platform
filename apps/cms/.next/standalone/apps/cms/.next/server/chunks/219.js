exports.id=219,exports.ids=[219],exports.modules={7784:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(89484);function e({error:a,reset:b}){return(0,d.jsx)("html",{children:(0,d.jsx)("body",{children:(0,d.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"system-ui, sans-serif",backgroundColor:"#fafafa",padding:"1rem"},children:(0,d.jsxs)("div",{style:{maxWidth:"400px",textAlign:"center",padding:"2rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[(0,d.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"⚠️"}),(0,d.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"CMS Critical Error"}),(0,d.jsx)("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.5"},children:"A critical error occurred in the content management system. Please refresh the page or contact your system administrator."}),(0,d.jsxs)("div",{style:{display:"flex",gap:"0.5rem",flexDirection:"column"},children:[(0,d.jsx)("button",{onClick:b,style:{padding:"0.75rem 1.5rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Try Again"}),(0,d.jsx)("button",{onClick:()=>window.location.href="/dashboard",style:{padding:"0.75rem 1.5rem",backgroundColor:"transparent",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Go to Dashboard"})]}),!1]})})})})}c(3477)},7838:(a,b,c)=>{Promise.resolve().then(c.bind(c,35574))},11852:(a,b,c)=>{Promise.resolve().then(c.bind(c,62812))},13539:(a,b,c)=>{Promise.resolve().then(c.bind(c,70961))},15668:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,48735,23))},22675:(a,b,c)=>{"use strict";c.d(b,{$:()=>j});var d=c(89484),e=c(3477),f=c(6397),g=c(52363),h=c(75052);let i=(0,g.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-indigo-600 text-white hover:bg-indigo-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-white hover:bg-gray-50 text-gray-700",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 text-gray-700",link:"text-indigo-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...g},j)=>{let k=e?f.DX:"button";return(0,d.jsx)(k,{className:(0,h.cn)(i({variant:b,size:c,className:a})),ref:j,...g})});j.displayName="Button"},25004:(a,b,c)=>{Promise.resolve().then(c.bind(c,45106))},27611:(a,b,c)=>{Promise.resolve().then(c.bind(c,95754))},28758:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,89003,23)),Promise.resolve().then(c.t.bind(c,78967,23)),Promise.resolve().then(c.t.bind(c,68410,23)),Promise.resolve().then(c.t.bind(c,45982,23)),Promise.resolve().then(c.t.bind(c,64706,23)),Promise.resolve().then(c.t.bind(c,14960,23)),Promise.resolve().then(c.t.bind(c,72618,23)),Promise.resolve().then(c.bind(c,48842))},35574:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(30822).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tsaa/Workspace/coder/saas-platform/apps/cms/app/global-error.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tsaa/Workspace/coder/saas-platform/apps/cms/app/global-error.tsx","default")},44146:(a,b,c)=>{"use strict";var d,e,f;c.d(b,{_g:()=>e}),function(a){a.UNSPECIFIED="USER_ROLE_UNSPECIFIED",a.ADMIN="USER_ROLE_ADMIN",a.EDITOR="USER_ROLE_EDITOR"}(d||(d={})),function(a){a.UNSPECIFIED="PAGE_STATUS_UNSPECIFIED",a.DRAFT="PAGE_STATUS_DRAFT",a.PUBLISHED="PAGE_STATUS_PUBLISHED",a.ARCHIVED="PAGE_STATUS_ARCHIVED"}(e||(e={})),function(a){a.UNSPECIFIED="CONTACT_STATUS_UNSPECIFIED",a.NEW="CONTACT_STATUS_NEW",a.READ="CONTACT_STATUS_READ",a.REPLIED="CONTACT_STATUS_REPLIED",a.SPAM="CONTACT_STATUS_SPAM"}(f||(f={}))},45106:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(30822).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tsaa/Workspace/coder/saas-platform/apps/cms/app/error.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tsaa/Workspace/coder/saas-platform/apps/cms/app/error.tsx","default")},54549:()=>{},62812:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i});var d=c(89484);c(3477);var e=c(72355),f=c(72016),g=c(96519),h=c(41782);function i({error:a,reset:b}){return(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,d.jsxs)("div",{className:"max-w-md w-full mx-auto text-center p-6",children:[(0,d.jsx)(f.A,{className:"mx-auto h-16 w-16 text-destructive mb-6"}),(0,d.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-4",children:"CMS Error"}),(0,d.jsx)("p",{className:"text-muted-foreground mb-8 leading-relaxed",children:"An error occurred in the content management system. The development team has been notified."}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)(e.$,{onClick:b,className:"w-full",children:[(0,d.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Try Again"]}),(0,d.jsxs)(e.$,{variant:"outline",onClick:()=>window.location.href="/dashboard",className:"w-full",children:[(0,d.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Go to Dashboard"]})]}),!1]})})}},65147:(a,b,c)=>{"use strict";c.d(b,{Aw:()=>i,wR:()=>j});class d{constructor(a){this.client=a}async createPage(a){return this.client.post("/api/v1/pages",a)}async getPage(a){return this.client.get(`/api/v1/pages/${a.id}`)}async updatePage(a){let{id:b,...c}=a;return this.client.put(`/api/v1/pages/${b}`,c)}async deletePage(a){return this.client.delete(`/api/v1/pages/${a.id}`)}async listPages(a={}){let b={};return a.page_size&&(b.page_size=a.page_size.toString()),a.page_token&&(b.page_token=a.page_token),a.status&&(b.status=a.status),a.search&&(b.search=a.search),this.client.get("/api/v1/pages",b)}async createBlogPost(a){return this.client.post("/api/v1/blog",a)}async getBlogPost(a){return this.client.get(`/api/v1/blog/${a.id}`)}async updateBlogPost(a){let{id:b,...c}=a;return this.client.put(`/api/v1/blog/${b}`,c)}async deleteBlogPost(a){return this.client.delete(`/api/v1/blog/${a.id}`)}async listBlogPosts(a={}){let b={};return a.page_size&&(b.page_size=a.page_size.toString()),a.page_token&&(b.page_token=a.page_token),a.status&&(b.status=a.status),a.category&&(b.category=a.category),a.tag&&(b.tag=a.tag),a.author&&(b.author=a.author),this.client.get("/api/v1/blog",b)}async searchBlogPosts(a){let b={query:a.query};return a.page_size&&(b.page_size=a.page_size.toString()),a.page_token&&(b.page_token=a.page_token),a.category&&(b.category=a.category),a.tag&&(b.tag=a.tag),this.client.get("/api/v1/blog/search",b)}async getBlogCategories(a={}){return this.client.get("/api/v1/blog/categories")}async getBlogTags(a={}){return this.client.get("/api/v1/blog/tags")}async getRSSFeed(a={}){return this.client.get("/api/v1/blog/rss")}}class e{constructor(a){this.client=a}async submitContactForm(a){return this.client.post("/api/v1/contact",a)}async listContactSubmissions(a={}){let b={};return a.page_size&&(b.page_size=a.page_size.toString()),a.page_token&&(b.page_token=a.page_token),a.status&&(b.status=a.status),a.search&&(b.search=a.search),this.client.get("/api/v1/contact/submissions",b)}async getContactSubmission(a){return this.client.get(`/api/v1/contact/submissions/${a.id}`)}async markContactSubmissionAsRead(a){return this.client.put(`/api/v1/contact/submissions/${a.id}/read`,{})}async deleteContactSubmission(a){return this.client.delete(`/api/v1/contact/submissions/${a.id}`)}}class f{constructor(a){this.client=a}async uploadFile(a,b){if(a instanceof File){let c={};return b&&(c.alt_text=b),this.client.uploadFile("/api/v1/media/upload",a,c)}{let b=new File([a.content],a.filename,{type:a.mime_type}),c={};return a.alt_text&&(c.alt_text=a.alt_text),this.client.uploadFile("/api/v1/media/upload",b,c)}}async getFile(a){return this.client.get(`/api/v1/media/${a.id}`)}async deleteFile(a){return this.client.delete(`/api/v1/media/${a.id}`)}async listFiles(a={}){let b={};return a.page_size&&(b.page_size=a.page_size.toString()),a.page_token&&(b.page_token=a.page_token),a.mime_type_filter&&(b.mime_type_filter=a.mime_type_filter),a.search&&(b.search=a.search),this.client.get("/api/v1/media",b)}async updateFile(a){let{id:b,...c}=a;return this.client.put(`/api/v1/media/${b}`,c)}}c(44146);let g={auth:{user:["auth","user"]},pages:{all:["pages"],lists:()=>[...g.pages.all,"list"],list:a=>[...g.pages.lists(),a],details:()=>[...g.pages.all,"detail"],detail:a=>[...g.pages.details(),a]},media:{all:["media"],lists:()=>[...g.media.all,"list"],list:a=>[...g.media.lists(),a],details:()=>[...g.media.all,"detail"],detail:a=>[...g.media.details(),a]},contact:{all:["contact"],submissions:()=>[...g.contact.all,"submissions"],submissionsList:a=>[...g.contact.submissions(),a],submissionDetails:()=>[...g.contact.all,"submission"],submissionDetail:a=>[...g.contact.submissionDetails(),a]}},h=null;function i(a){new d(a),new e(a),h=new f(a)}function j(){if(!h)throw Error("Media service not initialized. Call setApiClient() first.");return h}},65710:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,52217,23)),Promise.resolve().then(c.t.bind(c,51873,23)),Promise.resolve().then(c.t.bind(c,49112,23)),Promise.resolve().then(c.t.bind(c,19624,23)),Promise.resolve().then(c.t.bind(c,21868,23)),Promise.resolve().then(c.t.bind(c,1946,23)),Promise.resolve().then(c.t.bind(c,50812,23)),Promise.resolve().then(c.t.bind(c,75884,23))},70128:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h,dynamic:()=>f,metadata:()=>g});var d=c(15358),e=c(70961);c(54549);let f="force-dynamic",g={title:"CMS Dashboard",description:"Content Management System for SaaS Platform"};function h({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{children:(0,d.jsx)(e.Providers,{children:a})})})}},70961:(a,b,c)=>{"use strict";c.d(b,{Providers:()=>d});let d=(0,c(30822).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tsaa/Workspace/coder/saas-platform/apps/cms/components/providers.tsx","Providers")},72355:(a,b,c)=>{"use strict";c.d(b,{$:()=>d.$});var d=c(22675)},75052:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(33229),e=c(429);function f(...a){return(0,e.QP)((0,d.$)(a))}},84104:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>q});var d=c(15358),e=c(21949),f=c.n(e),g=c(12591),h=c(79842),i=c(1089),j=c(17963),k=c(52151);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-indigo-600 text-white hover:bg-indigo-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-white hover:bg-gray-50 text-gray-700",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 text-gray-700",link:"text-indigo-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=g.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...f},g)=>{let i=e?h.DX:"button";return(0,d.jsx)(i,{className:function(...a){return(0,k.QP)((0,j.$)(a))}(l({variant:b,size:c,className:a})),ref:g,...f})});m.displayName="Button";var n=c(16432),o=c(60390),p=c(67130);function q(){return(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,d.jsxs)("div",{className:"max-w-md w-full mx-auto text-center p-6",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h1",{className:"text-9xl font-bold text-muted-foreground/20 mb-4",children:"404"}),(0,d.jsx)("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Page Not Found"}),(0,d.jsx)("p",{className:"text-muted-foreground leading-relaxed",children:"The CMS page you're looking for doesn't exist or you don't have permission to access it."})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)(m,{asChild:!0,className:"w-full",children:(0,d.jsxs)(f(),{href:"/dashboard",children:[(0,d.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Go to Dashboard"]})}),(0,d.jsx)(m,{variant:"outline",asChild:!0,className:"w-full",children:(0,d.jsxs)(f(),{href:"/dashboard/pages",children:[(0,d.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Manage Pages"]})}),(0,d.jsxs)(m,{variant:"ghost",onClick:()=>window.history.back(),className:"w-full",children:[(0,d.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Go Back"]})]}),(0,d.jsx)("div",{className:"mt-8 pt-8 border-t border-border",children:(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Need help? Contact your system administrator."})})]})})}},90534:(a,b,c)=>{Promise.resolve().then(c.bind(c,7784))},95754:(a,b,c)=>{"use strict";c.d(b,{Providers:()=>u});var d=c(89484),e=c(40203),f=c(3477),g=c(56989),h=c(46781);class i{constructor(a={}){this.errorQueue=[],this.flushTimer=null,this.retryCount=new Map,this.config={apiUrl:"/api/v1/errors/report",maxRetries:3,retryDelay:1e3,batchSize:10,flushInterval:3e4,enableLocalStorage:!0,enableConsoleLog:!1,...a},this.startPeriodicFlush(),this.loadQueuedErrors(),this.setupGlobalErrorHandlers()}setupGlobalErrorHandlers(){}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getCurrentUrl(){return""}getUserAgent(){return""}getSessionId(){return""}getUserId(){}logError(a){let b={id:this.generateId(),type:a.type||"client_error",message:a.message||"Unknown error",stack:a.stack,url:a.url||this.getCurrentUrl(),userAgent:a.userAgent||this.getUserAgent(),timestamp:a.timestamp||new Date().toISOString(),userId:a.userId||this.getUserId(),sessionId:a.sessionId||this.getSessionId(),additionalData:a.additionalData};this.config.enableConsoleLog&&console.error("Error logged:",b),this.errorQueue.push(b),this.config.enableLocalStorage&&this.saveQueuedErrors(),this.errorQueue.length>=this.config.batchSize&&this.flush()}logApiError(a,b,c){this.logError({type:"api_error",message:a.message||"API request failed",additionalData:{url:b,method:c,status:a.status,code:a.code,details:a.details}})}logNetworkError(a,b){this.logError({type:"network_error",message:a.message||"Network request failed",additionalData:{url:b,networkError:!0}})}logValidationError(a,b){this.logError({type:"validation_error",message:"Validation failed",additionalData:{context:b,validationErrors:a}})}async flush(){if(0===this.errorQueue.length)return;let a=this.errorQueue.splice(0,this.config.batchSize);try{let b=await fetch(this.config.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({errors:a})});if(!b.ok)throw Error(`HTTP ${b.status}: ${b.statusText}`);a.forEach(a=>{this.retryCount.delete(a.id)}),this.config.enableLocalStorage&&this.saveQueuedErrors()}catch(b){a.forEach(a=>{let b=this.retryCount.get(a.id)||0;b<this.config.maxRetries?(this.errorQueue.unshift(a),this.retryCount.set(a.id,b+1)):(console.error("Failed to send error after max retries:",a),this.retryCount.delete(a.id))}),setTimeout(()=>{this.flush()},this.config.retryDelay*Math.pow(2,Math.min(3,this.retryCount.size)))}}startPeriodicFlush(){}stopPeriodicFlush(){this.flushTimer&&(clearInterval(this.flushTimer),this.flushTimer=null)}saveQueuedErrors(){}loadQueuedErrors(){}getQueuedErrors(){return[...this.errorQueue]}clearQueue(){this.errorQueue=[],this.retryCount.clear(),this.config.enableLocalStorage}destroy(){this.stopPeriodicFlush(),this.flush(),this.clearQueue()}}let j=null;function k(){return j||(j=new i),j}function l(a,b,c){k().logApiError(a,b,c)}class m{constructor(a){this.accessToken=null,this.refreshToken=null,this.refreshPromise=null,this.baseUrl=a.baseUrl.replace(/\/$/,""),this.onTokenRefresh=a.onTokenRefresh,this.onAuthError=a.onAuthError,this.onRequestStart=a.onRequestStart,this.onRequestEnd=a.onRequestEnd,this.onError=a.onError,this.retryConfig={maxRetries:3,retryDelay:1e3,retryableStatusCodes:[408,429,500,502,503,504],exponentialBackoff:!0,...a.retryConfig}}setTokens(a,b){this.accessToken=a,this.refreshToken=b}clearTokens(){this.accessToken=null,this.refreshToken=null,this.refreshPromise=null}async refreshAccessToken(){if(!this.refreshToken)throw Error("No refresh token available");if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.performTokenRefresh();try{return await this.refreshPromise}finally{this.refreshPromise=null}}async performTokenRefresh(){let a=await fetch(`${this.baseUrl}/api/v1/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:this.refreshToken})});if(!a.ok)throw this.clearTokens(),this.onAuthError?.(),Error("Failed to refresh token");let b=await a.json();return this.setTokens(b.access_token,b.refresh_token),this.onTokenRefresh?.(b),b.access_token}async makeRequest(a,b={}){return this.makeRequestWithRetry(a,b,0)}async makeRequestWithRetry(a,b,c){let d=`${this.baseUrl}${a}`,e=b.method||"GET",f={"Content-Type":"application/json",...b.headers||{}};this.accessToken&&(f.Authorization=`Bearer ${this.accessToken}`);try{let g={...b,headers:f};this.onRequestStart?.(d,g);let h=await fetch(d,g);if(this.onRequestEnd?.(d,h),401===h.status&&this.refreshToken&&"/api/v1/auth/refresh"!==a)try{await this.refreshAccessToken(),f.Authorization=`Bearer ${this.accessToken}`,h=await fetch(d,{...b,headers:f})}catch(b){let a=await this.handleErrorResponse(h);return a.error&&(l(a.error,d,e),this.onError?.(a.error,d)),a}if(!h.ok&&this.shouldRetry(h.status,c)){let d=this.calculateRetryDelay(c);return await this.sleep(d),this.makeRequestWithRetry(a,b,c+1)}if(!h.ok){let a=await this.handleErrorResponse(h);return a.error&&(l(a.error,d,e),this.onError?.(a.error,d)),a}if(204===h.status||"0"===h.headers.get("content-length"))return{data:{}};return{data:await h.json()}}catch(f){if(this.shouldRetry(0,c)){let d=this.calculateRetryDelay(c);return await this.sleep(d),this.makeRequestWithRetry(a,b,c+1)}let e={code:"NETWORK_ERROR",message:f instanceof Error?f.message:"Network request failed"};return k().logNetworkError(f,d),this.onError?.(e,d),{error:e}}}shouldRetry(a,b){return!(b>=this.retryConfig.maxRetries)&&(0===a||this.retryConfig.retryableStatusCodes.includes(a))}calculateRetryDelay(a){let b=this.retryConfig.retryDelay;return this.retryConfig.exponentialBackoff?b*Math.pow(2,a)+1e3*Math.random():b}sleep(a){return new Promise(b=>setTimeout(b,a))}async handleErrorResponse(a){try{let b=await a.json();return{error:{code:b.code||"UNKNOWN_ERROR",message:b.message||`HTTP ${a.status}: ${a.statusText}`,details:b.details}}}catch{return{error:{code:"HTTP_ERROR",message:`HTTP ${a.status}: ${a.statusText}`}}}}async login(a){let b=await this.makeRequest("/api/v1/auth/login",{method:"POST",body:JSON.stringify(a)});return b.data&&this.setTokens(b.data.access_token,b.data.refresh_token),b}async validateToken(a){return this.makeRequest("/api/v1/auth/validate",{method:"POST",body:JSON.stringify(a)})}async logout(a){let b=await this.makeRequest("/api/v1/auth/logout",{method:"POST",body:JSON.stringify(a)});return this.clearTokens(),b}async get(a,b){let c=b?`${a}?${new URLSearchParams(b)}`:a;return this.makeRequest(c,{method:"GET"})}async post(a,b){return this.makeRequest(a,{method:"POST",body:b?JSON.stringify(b):void 0})}async put(a,b){return this.makeRequest(a,{method:"PUT",body:b?JSON.stringify(b):void 0})}async delete(a){return this.makeRequest(a,{method:"DELETE"})}async uploadFile(a,b,c){let d=new FormData;d.append("file",b),c&&Object.entries(c).forEach(([a,b])=>{d.append(a,b)});let e={};this.accessToken&&(e.Authorization=`Bearer ${this.accessToken}`);try{let b=await fetch(`${this.baseUrl}${a}`,{method:"POST",headers:e,body:d});if(401===b.status&&this.refreshToken)try{await this.refreshAccessToken(),e.Authorization=`Bearer ${this.accessToken}`,b=await fetch(`${this.baseUrl}${a}`,{method:"POST",headers:e,body:d})}catch(a){return this.handleErrorResponse(b)}if(!b.ok)return this.handleErrorResponse(b);return{data:await b.json()}}catch(a){return{error:{code:"NETWORK_ERROR",message:a instanceof Error?a.message:"File upload failed"}}}}isAuthenticated(){return null!==this.accessToken}getAccessToken(){return this.accessToken}}let n={baseUrl:process.env.NEXT_PUBLIC_API_URL||"http://localhost:8080",onTokenRefresh:a=>{},onAuthError:()=>{}};c(65147);let o=(0,f.createContext)(null);function p({children:a,config:b={},queryClient:c}){let[e]=(0,f.useState)(()=>new m({...n,...b})),[i,j]=(0,f.useState)(!1),[k]=(0,f.useState)(()=>c||new g.E({defaultOptions:{queries:{retry:(a,b)=>b?.response?.status!==401&&a<3,staleTime:3e5,gcTime:6e5},mutations:{retry:!1}}}));return(0,d.jsx)(o.Provider,{value:{client:e,isAuthenticated:i,login:(a,b)=>{e.setTokens(a,b),j(!0)},logout:()=>{e.clearTokens(),j(!1),k.clear()}},children:(0,d.jsx)(h.Ht,{client:k,children:a})})}var q=c(22675),r=c(70609),s=c(92506);class t extends f.Component{constructor(a){super(a),this.logError=(a,b)=>{},this.reportError=async a=>{try{await fetch("/api/v1/errors/report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"client_error",...a})})}catch(a){console.error("Failed to report error:",a)}},this.handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a,errorInfo:null}}componentDidCatch(a,b){this.setState({error:a,errorInfo:b}),this.logError(a,b),this.props.onError?.(a,b)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,d.jsx)("div",{className:"max-w-md w-full mx-auto p-6",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(r.A,{className:"mx-auto h-12 w-12 text-destructive mb-4"}),(0,d.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Something went wrong"}),(0,d.jsx)("p",{className:"text-muted-foreground mb-6",children:"We're sorry, but something unexpected happened. Please try again."}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)(q.$,{onClick:this.handleRetry,className:"w-full",children:[(0,d.jsx)(s.A,{className:"mr-2 h-4 w-4"}),"Try Again"]}),(0,d.jsx)(q.$,{variant:"outline",onClick:this.handleReload,className:"w-full",children:"Reload Page"})]}),this.props.showDetails&&this.state.error&&(0,d.jsxs)("details",{className:"mt-6 text-left",children:[(0,d.jsx)("summary",{className:"cursor-pointer text-sm text-muted-foreground hover:text-foreground",children:"Error Details"}),(0,d.jsxs)("div",{className:"mt-2 p-3 bg-muted rounded-md text-xs font-mono",children:[(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("strong",{children:"Error:"})," ",this.state.error.message]}),this.state.error.stack&&(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("strong",{children:"Stack:"}),(0,d.jsx)("pre",{className:"whitespace-pre-wrap mt-1",children:this.state.error.stack})]}),this.state.errorInfo?.componentStack&&(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Component Stack:"}),(0,d.jsx)("pre",{className:"whitespace-pre-wrap mt-1",children:this.state.errorInfo.componentStack})]})]})]})]})})}):this.props.children}}function u({children:a}){return(0,f.useState)(()=>{}),(0,d.jsx)(t,{showDetails:!1,onError:(a,b)=>{console.error("CMS Error Boundary:",a,b)},children:(0,d.jsx)(e.SessionProvider,{children:(0,d.jsx)(p,{children:a})})})}},97108:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,21949,23))}};