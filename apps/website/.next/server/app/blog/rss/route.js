"use strict";(()=>{var e={};e.id=640,e.ids=[640],e.modules={5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2496:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>b,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>d,staticGenerationAsyncStorage:()=>h});var a={};t.r(a),t.d(a,{GET:()=>c,revalidate:()=>g});var o=t(4675),s=t(846),n=t(2705),i=t(1340),l=t(932);async function c(){try{let e=await (0,l.Kv)();if(!e)return new i.NextResponse("RSS feed not available",{status:404});return new i.NextResponse(e,{status:200,headers:{"Content-Type":"application/rss+xml; charset=utf-8","Cache-Control":"public, max-age=3600, s-maxage=3600"}})}catch(e){return console.error("Error generating RSS feed:",e),new i.NextResponse("Internal Server Error",{status:500})}}let g=3600,u=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/blog/rss/route",pathname:"/blog/rss",filename:"route",bundlePath:"app/blog/rss/route"},resolvedPagePath:"/Users/tsaa/Workspace/devops/coder/cms/apps/website/app/blog/rss/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:d}=u,f="/blog/rss/route";function b(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:h})}},932:(e,r,t)=>{t.d(r,{Dc:()=>d,Dw:()=>y,Iu:()=>p,J$:()=>b,Kv:()=>w,bT:()=>g,eB:()=>h,it:()=>u,y0:()=>f});var a=t(5110);class o{constructor(e){this.baseUrl=e.replace(/\/$/,"")}async get(e,r){let t=r?`${e}?${new URLSearchParams(r)}`:e;try{let e=await fetch(`${this.baseUrl}${t}`,{method:"GET",headers:{"Content-Type":"application/json"},next:{revalidate:300}});if(!e.ok)return{error:{code:"HTTP_ERROR",message:`HTTP ${e.status}: ${e.statusText}`}};return{data:await e.json()}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network request failed"}}}}}class s{constructor(e){this.client=e}async listPages(e={}){let r={};return e.page_size&&(r.page_size=e.page_size.toString()),e.page_token&&(r.page_token=e.page_token),e.status&&(r.status=e.status),e.search&&(r.search=e.search),this.client.get("/api/v1/pages",r)}async getPage(e){return this.client.get(`/api/v1/pages/${e.id}`)}}let n=new s(new o(process.env.API_URL||process.env.NEXT_PUBLIC_API_URL||"http://localhost:8080")),i=new Map,l=new Map,c=(0,a.unstable_cache)(async()=>{try{let e=await n.listPages({status:"PAGE_STATUS_PUBLISHED",page_size:100});if(e.error)return console.error("Error fetching published pages:",e.error),[];return e.data?.pages||[]}catch(e){return console.error("Error fetching published pages:",e),[]}},["published-pages"],{tags:["pages","published-pages"],revalidate:300});async function g(){let e="published-pages";if(l.has(e))return l.get(e);let r=await c();return l.set(e,r),r.forEach(e=>{i.set(e.slug,e)}),r}async function u(e){if(i.has(e))return i.get(e);try{let r=(await g()).find(r=>r.slug===e);if(r)return i.set(e,r),r;return null}catch(r){return console.error(`Error fetching page with slug "${e}":`,r),null}}async function p(e={}){let{page:r=1,pageSize:t=12,category:a,tag:o}=e;try{let e={page_size:t,page_token:r>1?((r-1)*t).toString():void 0,status:"PAGE_STATUS_PUBLISHED",...a&&{category:a},...o&&{tag:o}},s=await n.listBlogPosts(e);if(s.error)return console.error("Error fetching blog posts:",s.error),{posts:[],hasMore:!1,totalCount:0};let i=s.data?.posts||[],l=!!s.data?.next_page_token,c=s.data?.total_count||0;return{posts:i,hasMore:l,totalCount:c}}catch(e){return console.error("Error fetching blog posts:",e),{posts:[],hasMore:!1,totalCount:0}}}async function h(e){try{let{posts:r}=await p({pageSize:100});return r.find(r=>r.slug===e)||null}catch(r){return console.error(`Error fetching blog post with slug "${e}":`,r),null}}async function d(){try{let e=await n.getBlogCategories();if(e.error)return console.error("Error fetching blog categories:",e.error),[];return e.data?.categories||[]}catch(e){return console.error("Error fetching blog categories:",e),[]}}async function f(){try{let e=await n.getBlogTags();if(e.error)return console.error("Error fetching blog tags:",e.error),[];return e.data?.tags||[]}catch(e){return console.error("Error fetching blog tags:",e),[]}}async function b(e,r={}){let{page:t=1,pageSize:a=12,category:o,tag:s}=r;try{let r=await n.searchBlogPosts({query:e,page_size:a,page_token:t>1?((t-1)*a).toString():void 0,...o&&{category:o},...s&&{tag:s}});if(r.error)return console.error("Error searching blog posts:",r.error),{posts:[],hasMore:!1,totalCount:0};let i=r.data?.posts||[],l=!!r.data?.next_page_token,c=r.data?.total_count||0;return{posts:i,hasMore:l,totalCount:c}}catch(e){return console.error("Error searching blog posts:",e),{posts:[],hasMore:!1,totalCount:0}}}async function y(e,r=3){try{let t=[],a=new Set([e.id]);if(e.categories.length>0)for(let o of e.categories){if(t.length>=r)break;let{posts:e}=await p({category:o,pageSize:2*r});for(let o of e){if(t.length>=r)break;a.has(o.id)||(t.push(o),a.add(o.id))}}if(t.length<r&&e.tags.length>0)for(let o of e.tags){if(t.length>=r)break;let{posts:e}=await p({tag:o,pageSize:2*r});for(let o of e){if(t.length>=r)break;a.has(o.id)||(t.push(o),a.add(o.id))}}if(t.length<r){let{posts:e}=await p({pageSize:2*r});for(let o of e){if(t.length>=r)break;a.has(o.id)||(t.push(o),a.add(o.id))}}return t.slice(0,r)}catch(e){return console.error("Error fetching related blog posts:",e),[]}}async function w(){try{let e=await n.getRSSFeed();if(e.error)return console.error("Error fetching RSS feed:",e.error),"";return e.data?.xml_content||""}catch(e){return console.error("Error fetching RSS feed:",e),""}}(0,a.unstable_cache)(async e=>{try{let r=await n.getPage({id:e});if(r.error)return console.error("Error fetching page by ID:",r.error),null;return r.data||null}catch(r){return console.error(`Error fetching page with ID "${e}":`,r),null}},["page-by-id"],{tags:["pages"],revalidate:300})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[14,110,188],()=>t(2496));module.exports=a})();