(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[885],{5070:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var t=a(2455),l=a(1439),n=a(4986),i=a(5949),r=a(7855),c=a(6115),d=a(1180),o=a(9382);function m(){var e;let[s,a]=(0,l.useState)(""),[m,x]=(0,l.useState)(""),[h,u]=(0,l.useState)(null),{data:p,isLoading:g,error:j}=(0,o.rP)({search:s||void 0,status:m||void 0,page_size:50}),b=(0,o.Z3)(),y=(0,o.rX)(),N=(null==p||null==(e=p.data)?void 0:e.submissions)||[],v=async e=>{try{await b.mutateAsync(e)}catch(e){console.error("Failed to mark as read:",e)}},f=async e=>{if(confirm("Are you sure you want to delete this submission?"))try{await y.mutateAsync(e)}catch(e){console.error("Failed to delete submission:",e)}};return j?(0,t.jsx)(n.U,{children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-red-600 mb-4",children:"Failed to load contact submissions"}),(0,t.jsx)(i.$,{onClick:()=>window.location.reload(),children:"Try Again"})]})}):(0,t.jsx)(n.U,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Contact Submissions"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"Manage and respond to contact form submissions"})]}),(0,t.jsx)(r.Zp,{className:"p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700",children:"Search"}),(0,t.jsx)(c.p,{id:"search",type:"text",placeholder:"Search by name, email, or message...",value:s,onChange:e=>a(e.target.value),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,t.jsxs)("select",{id:"status",value:m,onChange:e=>x(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"All Statuses"}),(0,t.jsx)("option",{value:d.Pr.NEW,children:"New"}),(0,t.jsx)("option",{value:d.Pr.READ,children:"Read"}),(0,t.jsx)("option",{value:d.Pr.REPLIED,children:"Replied"}),(0,t.jsx)("option",{value:d.Pr.SPAM,children:"Spam"})]})]})]})}),g?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading submissions..."})}):0===N.length?(0,t.jsxs)(r.Zp,{className:"p-12 text-center",children:[(0,t.jsx)("div",{className:"text-gray-500 mb-4",children:"No contact submissions found"}),(s||m)&&(0,t.jsx)(i.$,{onClick:()=>{a(""),x("")},children:"Clear Filters"})]}):(0,t.jsx)("div",{className:"space-y-4",children:N.map(e=>(0,t.jsx)(r.Zp,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),(e=>{let s={[d.Pr.NEW]:{color:"bg-blue-100 text-blue-800",label:"New"},[d.Pr.READ]:{color:"bg-gray-100 text-gray-800",label:"Read"},[d.Pr.REPLIED]:{color:"bg-green-100 text-green-800",label:"Replied"},[d.Pr.SPAM]:{color:"bg-red-100 text-red-800",label:"Spam"},[d.Pr.UNSPECIFIED]:{color:"bg-gray-100 text-gray-800",label:"Unknown"}},a=s[e]||s[d.Pr.UNSPECIFIED];return(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(a.color),children:a.label})})(e.status)]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Email:"})," ",e.email,e.company&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"mx-2",children:"â€¢"}),(0,t.jsx)("span",{className:"font-medium",children:"Company:"})," ",e.company]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 mb-4",children:["Submitted on ",new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,t.jsx)("div",{className:"bg-gray-50 rounded-md p-4",children:(0,t.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:e.message})})]}),(0,t.jsxs)("div",{className:"ml-6 flex flex-col space-y-2",children:[e.status===d.Pr.NEW&&(0,t.jsx)(i.$,{size:"sm",onClick:()=>v(e.id),disabled:b.isPending,children:"Mark as Read"}),(0,t.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>{let s="Hi ".concat(e.name,",\n\nThank you for contacting us.\n\nBest regards,\nSaaS Platform Team");window.open("mailto:".concat(e.email,"?subject=").concat(encodeURIComponent("Re: Contact Form Submission"),"&body=").concat(encodeURIComponent(s)))},children:"Reply"}),(0,t.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>f(e.id),disabled:y.isPending,className:"text-red-600 hover:text-red-700",children:"Delete"})]})]})},e.id))})]})})}},7341:(e,s,a)=>{Promise.resolve().then(a.bind(a,5070))}},e=>{e.O(0,[96,76,504,358],()=>e(e.s=7341)),_N_E=e.O()}]);